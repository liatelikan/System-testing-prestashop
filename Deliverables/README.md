# Deliverables

This directory contains the deliverables for the project. 

1. **SUT Database Backup:**
After preparing the testing environment as described in the assignment instructions, you need to download a backup of the PrestaShop database and save it in this directory as `prestashop_db_backup.sql.gz`. See the assignment instructions for more details.
2. **CTD Files:**
This directory should also contain the CTD files generated by the ACTS tool. These include:
   1. The CTD model in a file named [prestashop.xml](/Deliverables/CTD/prestashop.xml).
   2. A screenshot of the CTD parameters in a file named [prestashop_model_parameters.png](/Deliverables/CTD/prestashop_model_parameters.png). Make sure the screenshot clearly shows all parameters and their values.
   3. A screenshot of the CTD constraints in a file named [prestashop_model_constraints.png](/Deliverables/CTD/prestashop_model_constraints.png). Make sure the screenshot clearly shows all constraints.
   4. The generated pairwise test suite in a file named [prestashop_tests.csv](/Deliverables/CTD/prestashop_tests.csv).
   5. A screenshot of the pairwise test suite in a file named [prestashop_tests.png](/Deliverables/CTD/prestashop_tests.png).
3. **Cucumber:**
The [Cucumber directory](/Cucumber) should contain all the deliverables related to the Cucumber testing method, including:
   1. The feature files.
   2. The step definitions.
   3. Any additional files or resources used in the Cucumber tests.
4. A video file named [prestashop_testing_demo.mp4](prestashop_testing_demo.mp4) demonstrating the execution of the Cucumber tests on the PrestaShop SUT. Place this file in the Deliverables directory.
5. Change the following sections in this README.md file to reflect your work.
6. Commit and push all the changes to your GitHub repository.
7. Submit a single txt file named `submission.txt` to the assignment page in Moodle. The file should contain the link to your GitHub repository.


## How we prepared the SUT environment
Anwser:
The following configurations were applied to the PrestaShop store to support the test scenarios:
   1. VIP Group Setup: Created a VIP customer Group and applied a group-specific discount rate.
   2. Test Users: Generated dedicated user accounts representing each user role.
   3. Cart Level: Configured a rule granting a discount for carts with 3+ items.
   4. Product Level: Applied specific price reductions to the "Mug" and "T-Shirt" products.
   5. Carriers: Set up "Standard," "Express," and "No Carrier/Pick-up" options.
   6. Localization: Modified carrier restrictions based on shipment destinations (International vs. Local) to validate shipping logic.


## Explanation of the CTD model
Answer:
1. Parameters and Values

   Parameter: Customer_Type [Guest, Registered, VIP]
   Explanation: Represents the status of the user. "VIP" users often trigger automatic discounts, while "Guest" and "Registered" users not.

   Parameter: Product_Variant [Regular, Price_Rule]
   Explanation: Distinguishes between a standard product which is price based on the specific product combination (e.g., Size/Color) and one that is price based on a specific "Price Rule".

   Parameter: Carrier [Standard, Express, No Carrier Available]
   Explanation: Defines the shipping method. "No Carrier Available" typically implies scenarios like local pickup where shipping costs are zero or strictly limited.

   Parameter: Discount_Type [Product_level, Cart_level, No discount]
   Explanation: Specifies how the price is reduced. "Product_level" refers to discounts on the specific item, while "Cart_level" refers to global coupons or rules applied to the whole basket.

   Parameter: Country [Local, International]
   Explanation: Used to determine tax rates (VAT) and valid shipping zones.

   Parameter: Quantity [Under3Items, 3Items_Or_More]
   Explanation: Tests bulk purchase logic. "3Items_Or_More" is the threshold often used to trigger "High Quantity" specific price rules.

2. Constraints

   Constraint: Discount_Type = "Product_level" => Product_Variant = "Price_Rule"
   Explanation: If a test case involves a "Product_level" discount, the product variant must be set to "Price_Rule". This ensures that the system actually has a rule configured to generate that discount.

   Constraint: Country = "International" => Carrier != "No Carrier Available"
   Explanation: International orders generally require shipping. This constraint prevents the illogical scenario of an international customer choosing "No Carrier" (e.g., local pickup).

   Constraint: Customer_Type = "VIP" => Discount_Type = "Cart_level"
   Explanation: This enforces that whenever we test a "VIP" user, we are testing their ability to receive a "Cart_level" discount automatically.

3. Rationale and Relation to Functionality

   Pricing: We need to verify that product-specific discounts don't accidentally stack with cart-level discounts unless allowed, and that VIPs get their correct specific pricing.

   Shipping: The Carrier and Country parameters are critical because shipping costs often break checkout flows if a carrier is unavailable for a specific zone (e.g., International).

   User Types: The constraints regarding VIPs reflect the assignment's note that VIP status can "automatically apply discounts," creating a distinct flow from Guests.

   Quantity: This parameter explicitly tests the boundary for bulk discounts (typically 3+ items), ensuring the system switches pricing tiers correctly.


## Grouping of the CTD test cases
Answer:
| Group ID | Description                                                                      | Tests IDs   |
|----------|----------------------------------------------------------------------------------|-------------|
| A        | Guest and Registered users: Non-VIP with Shipping                                | 1,2,4,5,10  |
| B        | VIP users: cart-level discount shown at checkout                                 | 7,8,9       |
| C        | Guest and Registered users: with local pickup                                    | 3,6,11      |


## Explanation of the Cucumber tests
Answer:
Feature Overview
We implemented the Checkout Price Verification feature to ensure the system correctly calculates the final price—including shipping and discounts—for various user scenarios.
Test Structure
To maximize coverage while keeping the code clean, We used Scenario Outlines based on Combinatorial Testing Design (CTD) principles.
We divided the tests into three logical groups:
Group A: Non-VIP with Shipping: This covers the standard flow for Guest and Registered users. It verifies that shipping fees (Standard/Express) and discounts are correctly applied to the total.
Group B: VIP Users: This focuses on VIP accounts, which require a specific login step. It tests that VIP benefits are applied correctly across different carriers.
Group C: Local Pickup: This targets "Local" or "No Carrier Available" options. The main goal 
here is to verify that no shipping costs are added when a customer picks up the order in-store.

## Detected Bugs
Answer:
We detected the following bugs:
Bug 1: VIP Customer Group Discount Not Applied
1. General description: During the testing of the "VIP checkout flow", we found that when a specific discount or pricing rule is defined for the "VIP" customer group in the backend, it is not updated or applied during the checkout process. The system ignores the group-specific rule, and the user is charged the standard price.
2. Steps to reproduce:
   Log in to the PrestaShop admin panel.
   Create a "Cart Rule" (discount) specifically restricted to the "VIP" Customer Group.
   Log in to the store front-end as a user belonging to the "VIP" group.
   Add a product to the cart and proceed to checkout.
   Review the order summary and final price.
3. Expected result: The system should recognize the logged-in user's group, apply the configured discount, and display the reduced final price.
4. Actual result: The discount is not reflected at any stage of the order. The cart total remains at the original price, treating the VIP user as a standard Guest or Registered user.
Bug 2: "Continue" Button Click Intercepted due to Loading State and Sticky Header
1. General description: During the checkout process, specifically between the "Address" and "Shipping" steps, the automation script frequently fails with an ElementClickInterceptedException. This occurs for two combined reasons:
Timing: The "Continue" button renders in the DOM before the "Address Saved" notification or the page loading spinner has fully disappeared (requiring an ExpectedCondition.elementToBeClickable).
Obscured View: When the browser attempts to focus on the button, the fixed/sticky top navigation bar covers the button, making it unclickable without a specific scroll adjustment.
2. Steps to reproduce:
   Add a product to the cart and proceed to checkout.
   Fill in the required address details.
   Click "Save" to confirm the address.
   Attempt to immediately click the "Continue" button to proceed to the Shipping method.
3. Expected result: The "Continue" button should be fully visible and clickable immediately after the address is saved, without being obstructed by other UI elements or the header.
4. Actual result: The click action fails. The button is effectively "unclickable" because it is either still covered by the loading overlay (timing issue) or is positioned behind the sticky header (scrolling issue), throwing an interception error.

